<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="520" viewBox="0 0 900 520">
  <style>
    .box{fill:#f7fafc;stroke:#2b6cb0;stroke-width:2;rx:8;}
    .title{font:18px/1.2 sans-serif;fill:#2b6cb0;font-weight:700}
    .label{font:13px sans-serif;fill:#1a202c}
    .arrow{stroke:#4a5568;stroke-width:2;fill:none;marker-end:url(#arrow)}
    .icon-small{opacity:0.95}
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="5" orient="auto">
      <path d="M0 0 L10 5 L0 10 z" fill="#4a5568" />
    </marker>
  </defs>

  <!-- User/Browser -->
  <rect x="30" y="30" width="140" height="60" class="box" rx="8"/>
  <text x="100" y="60" text-anchor="middle" class="title">User</text>
  <text x="100" y="78" text-anchor="middle" class="label">Browser / Client</text>

  <!-- Nginx -->
  <rect x="220" y="30" width="180" height="90" class="box" rx="8"/>
  <!-- NGINX icon (simple stylized box/leaf) -->
  <g transform="translate(260,36) scale(0.9)" class="icon-small">
    <rect x="0" y="0" width="100" height="60" rx="6" fill="#3d9970" />
    <path d="M14 35 C28 20, 72 20, 86 35" fill="#2f855a" />
    <text x="50" y="40" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#ffffff">NGINX</text>
  </g>
  <text x="310" y="98" text-anchor="middle" class="label">Reverse Proxy</text>

  <!-- Frontend -->
  <rect x="460" y="20" width="180" height="110" class="box" rx="8"/>
  <!-- React icon (atom) -->
  <g transform="translate(500,28) scale(0.8)" class="icon-small">
    <circle cx="70" cy="30" r="10" fill="#61dafb" />
    <g stroke="#61dafb" stroke-width="3" fill="none">
      <ellipse cx="70" cy="30" rx="34" ry="12" transform="rotate(0 70 30)" />
      <ellipse cx="70" cy="30" rx="34" ry="12" transform="rotate(60 70 30)" />
      <ellipse cx="70" cy="30" rx="34" ry="12" transform="rotate(120 70 30)" />
    </g>
  </g>
  <text x="550" y="52" text-anchor="middle" class="title">Frontend</text>
  <text x="550" y="74" text-anchor="middle" class="label">React (served statically)</text>
  <text x="550" y="92" text-anchor="middle" class="label">Internal network</text>

  <!-- Backend -->
  <rect x="460" y="160" width="180" height="110" class="box" rx="8"/>
  <!-- Node icon (hexagon) -->
  <g transform="translate(492,168) scale(0.8)" class="icon-small">
    <polygon points="30,4 58,18 58,46 30,60 2,46 2,18" fill="#68a063" />
    <text x="30" y="38" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#ffffff">Node</text>
  </g>
  <text x="550" y="190" text-anchor="middle" class="title">Backend</text>
  <text x="550" y="212" text-anchor="middle" class="label">Node.js / Express API</text>
  <text x="550" y="232" text-anchor="middle" class="label">Port 5000 (internal)</text>

  <!-- Ollama / LLM -->
  <rect x="720" y="160" width="140" height="110" class="box" rx="8"/>
  <!-- Ollama icon (box) -->
  <g transform="translate(740,172) scale(0.9)" class="icon-small">
    <rect x="4" y="4" width="60" height="46" rx="6" fill="#6b46c1" />
    <rect x="10" y="10" width="48" height="18" fill="#9f7aea" />
    <text x="34" y="36" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#ffffff">OLLAMA</text>
  </g>
  <text x="790" y="212" text-anchor="middle" class="title">Ollama</text>
  <text x="790" y="232" text-anchor="middle" class="label">LLM runtime (11434)</text>

  <!-- Docker Compose / Networks footer -->
  <rect x="30" y="380" width="830" height="120" fill="#fff8dc" stroke="#d69e2e" stroke-width="1" rx="8"/>
  <text x="60" y="408" class="label">Deployment:</text>
  <text x="60" y="428" class="label">- Single `docker-compose.yaml` orchestrates services</text>
  <text x="60" y="448" class="label">- `public` network: exposes Nginx to host</text>
  <text x="60" y="468" class="label">- `internal` network: frontend, backend, ollama communicate privately</text>

  <!-- Arrows: User -> Nginx -->
  <path d="M170 60 L220 60" class="arrow" />
  <path d="M400 80 L460 80" class="arrow" />

  <!-- Nginx -> Frontend -->
  <path d="M400 50 L460 50" class="arrow" />
  <text x="335" y="40" class="label">/ (static)</text>

  <!-- Nginx -> Backend (/api) -->
  <path d="M400 100 L460 180" class="arrow" />
  <text x="345" y="110" class="label">/api/* → proxy</text>

  <!-- Backend -> Ollama -->
  <path d="M640 215 L720 215" class="arrow" />
  <text x="680" y="200" class="label">gRPC/HTTP → /api/generate</text>

  <!-- Frontend -> Backend (internal direct calls possible) -->
  <path d="M640 130 L640 160" class="arrow" />
  <text x="580" y="120" class="label">Fetch /api → via Nginx (recommended)</text>

  <!-- Service name labels -->
  <text x="120" y="110" class="label">Host: localhost (port 80) → Nginx</text>

</svg>